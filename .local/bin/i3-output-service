#!/usr/bin/env python

# Run the following command in a shell once to make it work:
#
# sudo apt install python3 python-is-python3
# systemctl --user daemon-reload
# systemctl --user start i3-output.service
#
# Check that the service is running with:
#
# systemctl --user status i3-output.service

import subprocess
import time
import lid

def main():
    lid_status: lid.Status = lid.Status.UNKNOWN

    while True:
        new_lid_status = lid.status()
        if new_lid_status != lid_status:
            lid_status = new_lid_status
            command = "i3-output --type auto"
            subprocess.run(command, shell=True)
        time.sleep(5)


if __name__ == "__main__":
    main()
