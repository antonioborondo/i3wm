#!/bin/bash

####################################################################################################
# Control the volume.
####################################################################################################

case "$1" in
  increase)
    volume_left=$(pactl get-sink-volume @DEFAULT_SINK@ | grep "Volume" | awk '{print substr($5, 1, length($5) - 1)}')
    volume_right=$(pactl get-sink-volume @DEFAULT_SINK@ | grep "Volume" | awk '{print substr($12, 1, length($12) - 1)}')
    volume=$(( volume_left > volume_right ? volume_left : volume_right))
    if [ $volume -ne 100 ]
    then
      if [[ $((volume+5)) -ge 100 ]]
      then
        pactl set-sink-volume @DEFAULT_SINK@ 100%
      else
        pactl set-sink-volume @DEFAULT_SINK@ +5%
      fi
    fi
    ;;
  decrease)
    pactl set-sink-volume @DEFAULT_SINK@ -5%
    ;;
  mute)
    pactl set-sink-mute @DEFAULT_SINK@ toggle
    ;;
  *)
    echo "Usage: $0 {increase|decrease|mute}"
    exit 2
esac

exit 0
